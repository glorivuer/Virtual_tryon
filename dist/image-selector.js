(()=>{"use strict";const e="ai-try-on-ext-overlay";function t(){document.querySelectorAll(`.${e}`).forEach(e=>e.remove())}function n(e,n){e.preventDefault(),e.stopPropagation(),n&&n.src&&(chrome.runtime.sendMessage({type:"IMAGE_SELECTED",url:n.src}),t())}chrome.runtime.onMessage.addListener((e,n,o)=>{"CANCEL_SELECTION"===e.type&&(t(),o({status:"cleaned up"}))}),function(){t(),function(){const t="ai-try-on-ext-styles";if(document.getElementById(t))return;const n=`\n        .${e} {\n            position: absolute;\n            background-color: rgba(255, 0, 0, 0.3);\n            border: 2px solid red;\n            cursor: pointer;\n            z-index: 99999;\n            box-sizing: border-box;\n            transition: background-color 0.2s;\n        }\n        .${e}:hover {\n            background-color: rgba(255, 0, 0, 0.5);\n        }\n    `,o=document.createElement("style");o.id=t,o.textContent=n,document.head.appendChild(o)}();const o=Array.from(document.getElementsByTagName("img"));for(const t of o)if(t.naturalWidth>=200&&t.naturalHeight>=200&&null!==t.offsetParent){const o=t.parentElement;if(o){const r=document.createElement("div");r.className=e,r.style.position="absolute",r.style.top=`${t.offsetTop}px`,r.style.left=`${t.offsetLeft}px`,r.style.width=`${t.offsetWidth}px`,r.style.height=`${t.offsetHeight}px`,r.addEventListener("click",e=>n(e,t),{once:!0}),o.style.position=o.style.position||"relative",o.appendChild(r)}}}()})();