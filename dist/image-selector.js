(()=>{"use strict";const e="ai-try-on-ext-overlay";function t(){document.querySelectorAll(`.${e}`).forEach(e=>e.remove()),document.querySelectorAll(`img.${e}-img-relative`).forEach(t=>{t.classList.remove(`${e}-img-relative`)})}function n(e){e.preventDefault(),e.stopPropagation();const n=e.target.previousElementSibling;n&&n.src&&(chrome.runtime.sendMessage({type:"IMAGE_SELECTED",url:n.src}),t())}const o="ai-try-on-ext-fullscreen-modal";chrome.runtime.onMessage.addListener((e,n,i)=>{switch(e.type){case"CANCEL_SELECTION":t(),i({status:"cleaned up"});break;case"SHOW_FULL_SCREEN_IMAGE":e.src&&(function(e){var t;null===(t=document.getElementById(o))||void 0===t||t.remove();const n=document.createElement("div");n.id=o,Object.assign(n.style,{position:"fixed",top:"0",left:"0",width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"2147483647",cursor:"pointer"});const i=document.createElement("img");i.src=e,Object.assign(i.style,{maxWidth:"90%",maxHeight:"90%",objectFit:"contain",cursor:"default"}),n.addEventListener("click",()=>{n.remove()}),i.addEventListener("click",e=>e.stopPropagation()),n.appendChild(i),document.body.appendChild(n)}(e.src),i({status:"modal shown"}))}}),function(){t(),function(){const t="ai-try-on-ext-styles";if(document.getElementById(t))return;const n=`\n        .${e} {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background-color: rgba(255, 0, 0, 0.3);\n            border: 2px solid red;\n            cursor: pointer;\n            z-index: 99999;\n            box-sizing: border-box;\n            transition: background-color 0.2s;\n        }\n        .${e}:hover {\n            background-color: rgba(255, 0, 0, 0.5);\n        }\n        img.${e}-img-relative {\n            position: relative;\n        }\n    `,o=document.createElement("style");o.id=t,o.textContent=n,document.head.appendChild(o)}();const o=Array.from(document.getElementsByTagName("img"));for(const t of o)if(t.naturalWidth>=200&&t.naturalHeight>=200&&null!==t.offsetParent){const o=t.parentElement;o&&"static"===window.getComputedStyle(o).position&&t.classList.add(`${e}-img-relative`);const i=document.createElement("div");i.className=e,i.addEventListener("click",n,{once:!0}),o&&(o.appendChild(i),o.style.position="relative")}}()})();